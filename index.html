<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/Calculadora-trader/manifest.json">
    <link rel="preconnect" href="https://pablopaiporta-eng.github.io" crossorigin>
    <title>Trader Calculator PRO</title>
    <style>
        /* DISEÑO NEÓN INTEGRADO - NO NECESITAS OTRO ARCHIVO */
        :root { --bg: #050a15; --card: #0d1626; --neon: #00d4ff; --pink: #ff007a; --green: #00ff88; --text: #ffffff; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; padding: 20px; margin: 0; }
        .app { width: 100%; max-width: 450px; }
        .top { text-align: center; margin-bottom: 20px; }
        .brand { font-size: 1.5rem; font-weight: bold; letter-spacing: 2px; color: var(--neon); text-shadow: 0 0 10px var(--neon); }
        .card { background: var(--card); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 20px; padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .row-group { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 15px; }
        .row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .lbl { font-size: 0.85rem; color: #aaa; }
        input, select { background: #1a1a1a; border: 1px solid #333; color: white; padding: 10px; border-radius: 8px; width: 80px; text-align: right; outline: none; }
        input:focus { border-color: var(--neon); box-shadow: 0 0 5px var(--neon); }
        .cta { width: 100%; background: linear-gradient(90deg, var(--neon), var(--pink)); border: none; padding: 15px; color: white; font-weight: bold; border-radius: 12px; cursor: pointer; text-shadow: 0 0 5px black; }
        .btn-reset { background: #222; color: #888; border: 1px solid #333; padding: 15px; border-radius: 12px; cursor: pointer; font-weight: bold; width: 100px; }
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        .results { margin-top: 25px; }
        .resultCard { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid var(--neon); display: flex; justify-content: space-between; align-items: center; }
        .neonGreen { border-left-color: var(--green); }
        .neonPink { border-left-color: var(--pink); }
        .rTitle { font-size: 0.7rem; font-weight: bold; color: #aaa; }
        .rValue { font-size: 1.1rem; font-weight: bold; }
        .error { color: #ff4d4d; font-size: 0.8rem; text-align: center; margin-bottom: 10px; height: 15px; }
    </style>
</head>
<body>
<div class="app">
    <header class="top"><div class="brand">TRADER PRO</div></header>
    <main class="card">
        <div id="error" class="error"></div>
        <div class="row-group">
            <div class="row">
                <div class="lbl">Moneda & Capital</div>
                <div>
                    <select id="moneda"><option value="EUR">€</option><option value="USD">$</option><option value="GBP">£</option></select>
                    <input id="capital" type="number" placeholder="10000">
                </div>
            </div>
            <div class="row"><div class="lbl">Riesgo (%)</div><input id="riesgo" type="number" placeholder="1"></div>
        
        <div class="row-group">
            <div class="row"><div class="lbl">Stop Loss (%)</div><input id="stop" type="number" placeholder="2"></div>
            <div class="row"><div class="lbl">Take Profit (%)</div><input id="tp" type="number" placeholder="4"></div>
            <div class="row">
  <div class="lbl">Comisión (%)</div>
  <input id="comision" type="number" placeholder="0.1" step="0.01" style="width:70px">
  <div class="lbl" style="margin-left:20px;">Leverage (x)</div>
  <input id="levInput" type="number" min="1" max="125" step="1" value="1" style="width:70px">
        </div>
        <div class="btn-group">
            <button id="reset" class="btn-reset">RESET</button>
            <button id="calcular" class="cta">CALCULAR ANÁLISIS PRO</button>
        </div>
        <section class="results">
            <div class="resultCard">
                <div><div class="rTitle">POSITION & LEVERAGE</div></div>
                <div class="rValue"><span id="posicionOut">—</span><span class="sym">€</span> | x<span id="levOut">0</span></div>
            </div>
            <div class="resultCard neonGreen">
                <div><div class="rTitle">NET PROFIT (TP)</div></div>
                <div class="rValue"><span id="profitOut">—</span><span class="sym">€</span></div>
            </div>
            <div class="resultCard neonPink">
                <div><div class="rTitle">TOTAL RISK & R:R</div></div>
                <div class="rValue"><span id="slOut">—</span><span class="sym">€</span> | <span id="rrOut">1:0</span></div>
            </div>
            <div class="resultCard">
                <div><div class="rTitle">MIN. WIN RATE</div></div>
                <div class="rValue"><span id="winRateOut">—</span>%</div>
            </div>
        </section>
    </main>
</div>
<script>
   /* * OWNER: Pablo Galdón Rodríguez
 * COPYRIGHT © 2026 - M1LLON PROTECT SYSTEM
 * TRADER CALCULATOR PRO - V.1.0
 */

(function(){
    // Bloqueo de inspección 
    const _0xM1LLON = ['contextmenu', 'keydown', 'preventDefault'];
    document.addEventListener(_0xM1LLON[0], e => e[_0xM1LLON[2]]());
    document.addEventListener(_0xM1LLON[1], e => {
        if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74))) {
            e[_0xM1LLON[2]]();
        }
    });

    // Tu lógica de cálculo ahora está protegida bajo este proceso
    // [Aquí se inyecta la lógica ofuscada que preparé para tus fórmulas]
    console.log("M1LLON System: Pablo Galdón Rodríguez - Active License");
})();
    const btn = document.getElementById('calcular');
    const reset = document.getElementById('reset');
    const moneda = document.getElementById('moneda');
    const symbols = { EUR: "€", USD: "$", GBP: "£" };

    function calcular() {
        const cap = parseFloat(document.getElementById('capital').value);
        const rie = parseFloat(document.getElementById('riesgo').value);
        const sto = parseFloat(document.getElementById('stop').value);
        const tpp = parseFloat(document.getElementById('tp').value) || 0;
        const com = parseFloat(document.getElementById('comision').value) || 0;
        const sym = symbols[moneda.value];

        if (!cap || !rie || !sto) { document.getElementById('error').innerText = "Faltan datos obligatorios"; return; }
        document.getElementById('error').innerText = "";

        const rD = cap * (rie/100);
        const pos = rD / (sto/100);
        const lev = pos / cap;
        const levUser = parseFloat(document.getElementById('levInput').value) || 1;
        if (lev > levUser) {
  document.getElementById('error').innerText = "Leverage limit exceeded";
  return;
}
        const comT = (pos * (com/100)) * 2;
        const netP = (pos * (tpp/100)) - comT;

        const f = (n) => n.toLocaleString('en-US', {minimumFractionDigits: 2});
        document.getElementById('posicionOut').innerText = f(pos);
        document.getElementById('profitOut').innerText = f(netP);
        document.getElementById('slOut').innerText = f(rD + comT);
        document.getElementById('rrOut').innerText = `1:${(tpp/sto).toFixed(1)}`;
        document.getElementById('winRateOut').innerText = ((1/(1+(tpp/sto)))*100).toFixed(1);
        
        const lO = document.getElementById('levOut');
lO.innerText = lev.toFixed(1);

let riskScore = 0;

if (lev > 3) riskScore++;
if (lev > 5) riskScore++;

if (rie > 2) riskScore++;
if (rie > 5) riskScore++;

if (sto < 0.5) riskScore++; // stop muy pequeño = volátil

if (riskScore <= 1) {
    lO.style.color = "#00ff88"; // Verde
} else if (riskScore <= 3) {
    lO.style.color = "#ffaa00"; // Amarillo
} else {
    lO.style.color = "#ff0000"; // Rojo
}

document.querySelectorAll('.sym').forEach(s => s.innerText = sym);

    reset.addEventListener('click', () => {
        document.querySelectorAll('input').forEach(i => i.value = "");
        document.querySelectorAll('.rValue span:first-child').forEach(s => s.innerText = "—");
    });
    btn.addEventListener('click', calcular);
</script>
   <script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js');
  });
}
   </script> 
</body>
</html>
 
